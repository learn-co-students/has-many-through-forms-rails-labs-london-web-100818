<h1><%=@post.title%></h1>
<hr>
<h3>Categories:</h3>
<ul>
<%@post.categories.each do |c|%>
    <h3><%=c.name%></h3>
<%end%>
</ul>
<h3>Content: <%=@post.content%></h3>
<% if @post.comments.length > 0 %>
    <h3>Comments:</h3>
    <ul>
    <% @post.comments.each do |c|%>
        <%if c.user != nil%>
            <h3><%=c.user.username%> says: <%=c.content%></h3>
        <%end%>
    <%end%>
    </ul>
<%else%>
    <h3>There are no comments or users for this post.</h3>
<%end%>
<hr>
<% if @post.users.length > 0 %>
    <h3>Users who have commented on this post:</h3>
    <ul>
    <%@post.users.uniq.each do |u|%>
        <h3><%=link_to u.username, u%></h3>
    <%end%>
    </ul>   
<%end%>
<hr>
<h3>Add a comment.</h3>
<%= form_for @comment do |f|%>
    <%=f.hidden_field( :post_id)%>
    <%=f.label :content%>
    <%=f.text_field :content%><br>
    <%=f.collection_select :user_id, User.all, :id, :username%><br>
    <%= f.fields_for :user_attributes do |user_fields|%>
        <%=user_fields.label :username%>
        <%=user_fields.text_field :username%>
        <br>
    <%end%>
    <%=f.submit%>
<%end%>
